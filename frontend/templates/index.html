<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>服务器管理系统</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://unpkg.com/@antv/g2@5.3.5/dist/g2.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>服务器管理系统</h1>
            <div class="status-bar">
                <span id="server-status">服务器状态: <span class="status-running">运行中</span></span>
                <div class="language-switcher">
                    <select id="language-select" onchange="switchLanguage(this.value)">
                        <option value="zh-CN">中文</option>
                        <option value="en-US">English</option>
                    </select>
                </div>
                <span id="current-time"></span>
            </div>
        </header>

        <nav>
            <button class="nav-btn active" onclick="showSection('monitoring')">系统监控</button>
            <button class="nav-btn" onclick="showSection('directory')">目录管理</button>
            <button class="nav-btn" onclick="showSection('docker')">Docker脚本</button>
            <button class="nav-btn" onclick="showSection('containers')">容器管理</button>
            <button class="nav-btn" onclick="showSection('images')">镜像管理</button>
            <button class="nav-btn" onclick="showSection('ports')">端口占用</button>
            <button class="nav-btn" onclick="showSection('services')">服务管理</button>
        </nav>

        <main>
            <!-- 目录管理 -->
            <section id="directory-section" class="content-section">
                <div class="section-header">
                    <h2>目录管理</h2>
                    <div class="path-navigator">
                        <input type="text" id="current-path" value="." readonly>
                        <button onclick="goToParent()">上级目录</button>
                        <button onclick="refreshDirectory()">刷新</button>
                    </div>
                </div>
                
                <div class="action-bar">
                    <button onclick="showCreateDirDialog()">新建目录</button>
                    <button onclick="deleteSelected()">删除选中</button>
                    <button onclick="showRenameDialog()">重命名</button>
                </div>

                <div class="file-list">
                    <div class="file-list-header">
                        <input type="checkbox" id="select-all">
                        <span>名称</span>
                        <span>类型</span>
                        <span>大小</span>
                        <span>修改时间</span>
                    </div>
                    <div id="file-list-content"></div>
                </div>
            </section>

            <!-- Docker脚本管理 -->
            <section id="docker-section" class="content-section">
                <div class="section-header">
                    <h2>Docker脚本管理</h2>
                    <div class="path-navigator">
                        <input type="text" id="docker-path" value="." readonly>
                        <button onclick="refreshDockerScripts()">刷新</button>
                    </div>
                </div>
                
                <div class="action-bar">
                    <button onclick="showCreateScriptDialog()">创建脚本</button>
                    <button onclick="deleteSelectedScript()">删除脚本</button>
                </div>

                <div class="script-list">
                    <div class="script-list-header">
                        <input type="checkbox" id="select-all-scripts">
                        <span>脚本名称</span>
                        <span>路径</span>
                        <span>操作</span>
                    </div>
                    <div id="script-list-content"></div>
                </div>
            </section>

            <!-- 容器管理 -->
            <section id="containers-section" class="content-section">
                <div class="section-header">
                    <h2>容器管理</h2>
                    <button onclick="refreshContainers()">刷新</button>
                </div>
                
                <div class="container-list">
                    <div class="container-list-header">
                        <span>容器ID</span>
                        <span>名称</span>
                        <span>镜像</span>
                        <span>状态</span>
                        <span>端口</span>
                        <span>创建时间</span>
                        <span>操作</span>
                    </div>
                    <div id="container-list-content"></div>
                </div>
            </section>

            <!-- 镜像管理 -->
            <section id="images-section" class="content-section">
                <div class="section-header">
                    <h2>镜像管理</h2>
                    <div class="action-bar">
                        <button onclick="showPullImageDialog()">拉取镜像</button>
                        <button onclick="pruneImages()">清理镜像</button>
                        <button onclick="refreshImages()">刷新</button>
                    </div>
                </div>
                
                <div class="image-list">
                    <div class="image-list-header">
                        <span>镜像ID</span>
                        <span>仓库</span>
                        <span>标签</span>
                        <span>大小</span>
                        <span>创建时间</span>
                        <span>操作</span>
                    </div>
                    <div id="image-list-content"></div>
                </div>
            </section>

            <!-- 端口占用 -->
            <section id="ports-section" class="content-section">
                <div class="section-header">
                    <h2>端口占用情况</h2>
                    <button onclick="refreshPorts()">刷新</button>
                </div>
                
                <div class="port-list">
                    <div class="port-list-header">
                        <span>端口</span>
                        <span>进程</span>
                        <span>PID</span>
                        <span>状态</span>
                    </div>
                    <div id="port-list-content"></div>
                </div>
            </section>

            <!-- 服务管理 -->
            <section id="services-section" class="content-section">
                <div class="section-header">
                    <h2>服务管理</h2>
                    <button onclick="refreshServices()">刷新</button>
                </div>
                
                <div class="service-list">
                    <div class="service-list-header">
                        <span>服务名称</span>
                        <span>状态</span>
                        <span>PID</span>
                        <span>内存</span>
                        <span>CPU</span>
                        <span>操作</span>
                    </div>
                    <div id="service-list-content"></div>
                </div>
            </section>

            <!-- 系统监控 -->
            <section id="monitoring-section" class="content-section active">
                <div class="section-header">
                    <h2>系统监控</h2>
                    <div class="monitoring-controls">
                        <button onclick="toggleMonitoring()" id="monitoring-toggle-btn">开始监控</button>
                        <span id="monitoring-status" class="status-disconnected">未连接</span>
                    </div>
                </div>
                
                <div class="monitoring-grid">
                    <div class="monitoring-card">
                        <h3>CPU 使用率</h3>
                        <div class="monitoring-value">
                            <span id="cpu-usage">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="cpu-progress" class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="monitoring-card">
                        <h3>内存使用</h3>
                        <div class="monitoring-value">
                            <span id="memory-usage">0 MB / 0 MB</span>
                            <span id="memory-percent" class="percent-label">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="memory-progress" class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="monitoring-card">
                        <h3>磁盘使用</h3>
                        <div class="monitoring-value">
                            <span id="disk-usage">0 GB / 0 GB</span>
                            <span id="disk-percent" class="percent-label">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="disk-progress" class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="monitoring-charts">
                    <div class="chart-controls">
                        <label for="time-range">时间范围:</label>
                        <select id="time-range" onchange="updateCharts()">
                            <option value="1min">1分钟</option>
                            <option value="5min" selected>5分钟</option>
                            <option value="30min">30分钟</option>
                        </select>
                        <button onclick="refreshCharts()">刷新图表</button>
                    </div>
                    
                    <div class="charts-container">
                        <div class="chart-card">
                            <h3>CPU使用率趋势</h3>
                            <div id="cpu-chart" style="width: 100%; height: 300px;"></div>
                        </div>
                        
                        <div class="chart-card">
                            <h3>内存使用率趋势</h3>
                            <div id="memory-chart" style="width: 100%; height: 300px;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="monitoring-info">
                    <div class="info-card">
                        <h3>系统运行时间</h3>
                        <span id="system-uptime">未知</span>
                    </div>
                    <div class="info-card">
                        <h3>最后更新时间</h3>
                        <span id="last-update">未更新</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 对话框 -->
    <div id="dialog" class="dialog-overlay">
        <div class="dialog">
            <div class="dialog-header">
                <h3 id="dialog-title">对话框</h3>
                <button onclick="closeDialog()" class="close-btn">&times;</button>
            </div>
            <div class="dialog-content" id="dialog-content"></div>
        </div>
    </div>

    <!-- 通知 -->
    <div id="notification" class="notification"></div>

    <script src="/static/js/app.js"></script>
</body>
</html>